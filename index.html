<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Game Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    html, body {margin:0; padding:0; font-family:'Segoe UI', Arial, sans-serif; background:#f5f8fe; color:#222; min-height:100vh;}
    nav {background:#f6faff; border-bottom:1.5px solid #d7e4f7; padding:10px 0 10px 16px;}
    nav a {color:#3366cc;text-decoration:none;font-weight:600;margin-right:16px;font-size:1.08em;}
    nav a:hover {text-decoration:underline;}
    main {max-width:1200px;margin:0 auto;}
    h1 {text-align:center;margin-top:32px;font-size:2.3em;letter-spacing:1px;}
    .game-grid {display:grid;grid-template-columns:repeat(auto-fit, minmax(180px, 1fr));gap:28px;max-width:1100px;margin:40px auto 20px auto;width:95vw;}
    .game-card {background:#fff;border-radius:16px;box-shadow:0 2px 12px rgba(51,102,204,0.09);display:flex;flex-direction:column;align-items:center;padding:24px 12px 18px 12px;cursor:pointer;transition:transform 0.13s, box-shadow 0.18s;min-height:200px;position:relative;user-select:none;}
    .game-card:hover, .game-card:focus {transform:translateY(-4px) scale(1.04);box-shadow:0 6px 24px rgba(51,102,204,0.16);outline:none;}
    .game-img {width:80px;height:80px;margin-bottom:18px;font-size:2.7em;display:flex;align-items:center;justify-content:center;background:#e7f0f7;border-radius:12px;box-shadow:0 1px 4px rgba(51,102,204,0.07);}
    .game-title {font-size:1.13em;font-weight:700;color:#3366cc;margin-bottom:7px;text-align:center;}
    .game-desc {font-size:0.97em;color:#444;margin-bottom:0;text-align:center;}
    #game-modal {display:none;position:fixed;z-index:100;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.7);justify-content:center;align-items:center;}
    #game-content {background:#fff;color:#222;border-radius:16px;padding:32px 18px 24px 18px;min-width:320px;min-height:320px;max-width:98vw;max-height:98vh;overflow:auto;position:relative;box-shadow:0 4px 32px #001b3b1c;}
    #close-btn {position:absolute;top:8px;right:12px;font-size:1.7em;background:none;border:none;color:#888;cursor:pointer;}
    .cell {
      background:#eee;
      border-radius:8px;
      border:1.5px solid #ccc;
      transition:background 0.15s;
      color: #222;
      font-weight: bold;
    }
    .cell:hover {background:#d3e5ff;}
    #ttt-board {margin-top:16px;}
    #memory-board {display:grid;grid-template-columns:repeat(4,60px);gap:8px;margin:24px auto 10px auto;justify-content:center;}
    .memory-card {border-radius:8px;transition:background 0.2s;user-select:none;border:1.5px solid #bbb;background:#bbb;}
    .memory-card.flipped {background:#fff9c4 !important;}
    .memory-card.matched {background:#c8e6c9 !important;}
    .rps-btn {margin:4px 10px 4px 0;font-size:1.1em;padding:10px 18px;border:none;border-radius:6px;background:#e3e9f9;cursor:pointer;transition:background 0.17s;}
    .rps-btn:hover {background:#d1dffb;}
    input[type="number"] {padding:5px 10px;font-size:1.07em;border-radius:5px;border:1px solid #bbb;margin-right:8px;width:80px;box-sizing:border-box;}
    button, .rps-btn {font-size:1em;padding:7px 18px;border-radius:6px;border:none;background:#e7f0f7;cursor:pointer;margin-top:10px;margin-bottom:6px;min-width:70px;white-space:normal;word-break:break-word;}
    button:hover, .rps-btn:hover {background:#d1e8ff;}
    canvas {display:block;margin:18px auto 10px auto;background:#222;border:2px solid #333;border-radius:9px;max-width:100%;height:auto;}
    .game-controls, .game-status {text-align:center;margin-bottom:8px;}
    @media (max-width:900px) {.game-grid {grid-template-columns:repeat(auto-fit, minmax(140px, 1fr)); gap:13px;}.game-card {min-height:130px; padding:10px 3px 7px 3px;}.game-img {width:50px;height:50px;font-size:1.6em;}h1 {font-size:1.5em;}#game-content {padding:10px 2vw 15px 2vw; min-width:0;}}
    @media (max-width:480px) {.game-grid {grid-template-columns:repeat(auto-fit, minmax(110px, 1fr)); gap:7px;}.game-card {min-height:95px;}.game-img {width:32px;height:32px;font-size:1em;}#game-content {padding:1vw;}button, .rps-btn {font-size:0.89em;padding:3px 5px;min-width:0;white-space:normal;word-break:break-word;margin-top:6px;margin-bottom:4px;}input[type="number"] {font-size:.97em;padding:3px 4px;width:60px;}}
    @media (prefers-color-scheme: dark) {body, html {background:#181e28 !important;}.game-card {background:#232b3b; color:#e7f0f7;}.game-title {color:#7aaaff;}.game-img {background:#232b3b;}#game-content {background:#232b3b; color:#e7f0f7;}nav {background:#222a39; border-bottom-color:#25304a;}.cell {background:#232b3b; border-color:#222a39; color: #fff;}.memory-card {background:#232b3b; border-color:#444;}button, .rps-btn {background:#203464; color:#e7f0f7;}button:hover, .rps-btn:hover {background:#162d53;}canvas {border-color:#7aaaff;}}
  </style>
</head>
<body>
  <nav>
    <a href="#" onclick="showHome();return false;">Home</a>
  </nav>
  <main id="main-content">
    <h1>Game Portal</h1>
    <div class="game-grid">
      <div class="game-card" tabindex="0" onclick="openGame('tictactoe')">
        <div class="game-img">‚ùå‚≠ï</div>
        <div class="game-title">Tic-Tac-Toe</div>
        <div class="game-desc">Classic X/O game</div>
      </div>
      <div class="game-card" tabindex="0" onclick="openGame('snake')">
        <div class="game-img">üêç</div>
        <div class="game-title">Snake</div>
        <div class="game-desc">Eat and grow!</div>
      </div>
      <div class="game-card" tabindex="0" onclick="openGame('rps')">
        <div class="game-img">‚úä‚úã‚úåÔ∏è</div>
        <div class="game-title">Rock Paper Scissors</div>
        <div class="game-desc">Beat the CPU</div>
      </div>
      <div class="game-card" tabindex="0" onclick="openGame('memory')">
        <div class="game-img">üß†</div>
        <div class="game-title">Memory Match</div>
        <div class="game-desc">Find all pairs</div>
      </div>
      <div class="game-card" tabindex="0" onclick="openGame('guess')">
        <div class="game-img">üî¢</div>
        <div class="game-title">Guess the Number</div>
        <div class="game-desc">1 to 100</div>
      </div>
    </div>
  </main>
  <div id="game-modal">
    <div id="game-content">
      <button id="close-btn" onclick="closeGame()">&times;</button>
    </div>
  </div>
  <script>
    function showHome() {
      document.getElementById('main-content').style.display = '';
      closeGame();
    }
    function openGame(game) {
      document.getElementById('main-content').style.display = 'none';
      document.getElementById('game-modal').style.display = 'flex';
      const content = document.getElementById('game-content');
      content.innerHTML = '<button id="close-btn" onclick="closeGame()">&times;</button>' + getGameHTML(game);
      setTimeout(() => {
        if (game === 'tictactoe') initTicTacToe();
        if (game === 'snake') initSnake();
        if (game === 'rps') initRps();
        if (game === 'memory') initMemory();
        if (game === 'guess') initGuess();
      }, 0);
    }
    function closeGame() {
      document.getElementById('game-modal').style.display = 'none';
      document.getElementById('game-content').innerHTML = '';
      document.getElementById('main-content').style.display = '';
      window.onkeydown = null;
      window.onkeyup = null;
      if(window._gameInterval){clearInterval(window._gameInterval);}
      if(window._gameTimeout){clearTimeout(window._gameTimeout);}
    }
    function getGameHTML(game) {
      switch (game) {
        case 'tictactoe':
          return `<h1>Tic-Tac-Toe</h1><div id="ttt-board" style="display:grid;grid-template-columns:repeat(3,80px);gap:5px;margin:30px auto;"></div><p id="ttt-status"></p><button onclick="initTicTacToe()">Restart</button>`;
        case 'snake':
          return `<h1>Snake Game</h1><canvas id="snake-canvas" width="400" height="400"></canvas><p id="snake-score">Score: 0</p><button onclick="initSnake()">Restart</button>`;
        case 'rps':
          return `<h1>Rock Paper Scissors</h1><div><button class="rps-btn" onclick="playRps('rock')">Rock</button><button class="rps-btn" onclick="playRps('paper')">Paper</button><button class="rps-btn" onclick="playRps('scissors')">Scissors</button></div><p id="rps-result"></p><button onclick="initRps()">Play Again</button>`;
        case 'memory':
          return `<h1>Memory Match</h1><div id="memory-board"></div><p id="memory-status"></p><button onclick="initMemory()">Restart</button>`;
        case 'guess':
          return `<h1>Guess the Number</h1><p>I'm thinking of a number between 1 and 100.</p><input id="guess-input" type="number" min="1" max="100" /><button onclick="checkGuess()">Guess</button><p id="guess-status"></p><button onclick="initGuess()">Restart</button>`;
        default: return '<p>Game not found.</p>';
      }
    }
    // ----------- GAMES IMPLEMENTATIONS BELOW -----------
    // Tic-Tac-Toe
    function initTicTacToe() {
      let board = Array(9).fill("");
      let currentPlayer = "X";
      let gameActive = true;
      const statusEl = document.getElementById("ttt-status");
      const boardEl = document.getElementById("ttt-board");
      function renderBoard() {
        boardEl.innerHTML = "";
        board.forEach((cell, idx) => {
          const div = document.createElement("div");
          div.className = "cell";
          div.style.width = div.style.height = "80px";
          div.style.fontSize = "2em";
          div.style.display = "flex";
          div.style.alignItems = "center";
          div.style.justifyContent = "center";
          div.style.cursor = "pointer";
          div.textContent = cell;
          div.onclick = () => handleCellClick(idx);
          boardEl.appendChild(div);
        });
      }
      function handleCellClick(idx) {
        if (!gameActive || board[idx]) return;
        board[idx] = currentPlayer;
        renderBoard(); // immediately update the UI
        if (checkWinner()) {
          statusEl.textContent = `Player ${currentPlayer} wins!`;
          gameActive = false;
        } else if (board.every(c => c)) {
          statusEl.textContent = "It's a tie!";
          gameActive = false;
        } else {
          currentPlayer = currentPlayer === "X" ? "O" : "X";
          statusEl.textContent = `Player ${currentPlayer}'s turn`;
        }
      }
      function checkWinner() {
        const wins = [
          [0,1,2],[3,4,5],[6,7,8],
          [0,3,6],[1,4,7],[2,5,8],
          [0,4,8],[2,4,6]
        ];
        return wins.some(line =>
          line.every(idx => board[idx] === currentPlayer)
        );
      }
      function resetGame() {
        board = Array(9).fill("");
        currentPlayer = "X";
        gameActive = true;
        statusEl.textContent = `Player ${currentPlayer}'s turn`;
        renderBoard();
      }
      window.handleCellClick = handleCellClick;
      window.initTicTacToe = resetGame;
      resetGame();
    }
    // Snake
    function initSnake() {
      const canvas = document.getElementById('snake-canvas');
      const ctx = canvas.getContext('2d');
      const box = 20, w = 400, h = 400;
      let snake = [{x: 200, y: 200}];
      let dx = box, dy = 0, score = 0;
      let food = randomFood();
      let changingDir = false;
      document.getElementById('snake-score').textContent = "Score: 0";
      function randomFood() {
        return {
          x: Math.floor(Math.random() * (w / box)) * box,
          y: Math.floor(Math.random() * (h / box)) * box
        };
      }
      function draw() {
        ctx.fillStyle = "#222";
        ctx.fillRect(0, 0, w, h);
        snake.forEach((s, i) => {
          ctx.fillStyle = i === 0 ? "#0f0" : "#fff";
          ctx.fillRect(s.x, s.y, box, box);
        });
        ctx.fillStyle = "#f00";
        ctx.fillRect(food.x, food.y, box, box);
        let head = {x: snake[0].x + dx, y: snake[0].y + dy};
        if (head.x < 0 || head.x >= w || head.y < 0 || head.y >= h || snake.some(s => s.x === head.x && s.y === head.y)) {
          clearInterval(window._gameInterval);
          setTimeout(()=>alert('Game Over! Your score: ' + score), 100);
          return;
        }
        snake.unshift(head);
        if (head.x === food.x && head.y === food.y) {
          score++;
          document.getElementById('snake-score').textContent = "Score: " + score;
          food = randomFood();
        } else {
          snake.pop();
        }
        changingDir = false;
      }
      window.onkeydown = function(e) {
        if (changingDir) return;
        changingDir = true;
        if ((e.key === "ArrowLeft" || e.key === "a") && dx === 0) { dx = -box; dy = 0; }
        if ((e.key === "ArrowUp" || e.key === "w") && dy === 0) { dx = 0; dy = -box; }
        if ((e.key === "ArrowRight" || e.key === "d") && dx === 0) { dx = box; dy = 0; }
        if ((e.key === "ArrowDown" || e.key === "s") && dy === 0) { dx = 0; dy = box; }
      };
      clearInterval(window._gameInterval);
      window._gameInterval = setInterval(draw, 100);
    }
    // RPS
    function initRps() { document.getElementById("rps-result").textContent = ''; }
    function playRps(user) {
      const choices = ["rock", "paper", "scissors"];
      const cpu = choices[Math.floor(Math.random() * 3)];
      let result;
      if (user === cpu) result = "It's a tie!";
      else if (
        (user === "rock" && cpu === "scissors") ||
        (user === "paper" && cpu === "rock") ||
        (user === "scissors" && cpu === "paper")
      ) result = "You win!";
      else result = "You lose!";
      document.getElementById("rps-result").textContent = `You chose ${user}. CPU chose ${cpu}. ${result}`;
    }
    // Memory
    function initMemory() {
      const symbols = ['üçé','üçå','üçí','üçá','üçâ','üçã','üçë','üçì'];
      let cards = shuffle([...symbols, ...symbols]);
      let matchedCount = 0;
      let first = null, second = null, lock = false;
      function shuffle(arr) {
        for (let i = arr.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
      }
      function renderMemory() {
        const board = document.getElementById('memory-board');
        board.innerHTML = "";
        cards.forEach((sym, idx) => {
          const div = document.createElement("div");
          div.className = "memory-card";
          div.style.width = div.style.height = "60px";
          div.style.fontSize = "2em";
          div.style.cursor = "pointer";
          div.style.display = "flex";
          div.style.alignItems = "center";
          div.style.justifyContent = "center";
          if (cards[idx] === null) {
            div.classList.add("matched");
            div.textContent = '';
          } else if (first === idx || second === idx) {
            div.classList.add("flipped");
            div.textContent = sym;
          } else {
            div.textContent = '';
          }
          div.onclick = () => flipCard(idx, div);
          board.appendChild(div);
        });
      }
      function flipCard(idx, div) {
        if (lock || cards[idx] === null || idx === first || idx === second) return;
        if (first === null) {
          first = idx;
        } else if (second === null) {
          second = idx;
          lock = true;
          setTimeout(checkMatch, 800);
        }
        renderMemory();
      }
      function checkMatch() {
        if (cards[first] === cards[second]) {
          cards[first] = cards[second] = null;
          matchedCount += 2;
        }
        first = second = null;
        lock = false;
        renderMemory();
        if (matchedCount === cards.length) {
          document.getElementById('memory-status').textContent = "Congratulations! You've matched all pairs!";
        }
      }
      window.initMemory = initMemory;
      renderMemory();
      document.getElementById('memory-status').textContent = '';
    }
    // Guess the Number
    function initGuess() {
      window._guessAnswer = Math.floor(Math.random() * 100) + 1;
      window._guessTries = 0;
      document.getElementById('guess-status').textContent = '';
      document.getElementById('guess-input').value = '';
    }
    function checkGuess() {
      const val = parseInt(document.getElementById('guess-input').value, 10);
      if (isNaN(val)) return;
      window._guessTries++;
      if (val === window._guessAnswer) {
        document.getElementById('guess-status').textContent = `Correct! You guessed it in ${window._guessTries} tries.`;
      } else if (val < window._guessAnswer) {
        document.getElementById('guess-status').textContent = 'Too low!';
      } else {
        document.getElementById('guess-status').textContent = 'Too high!';
      }
    }
  </script>
</body>
</html>
